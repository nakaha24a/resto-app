{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { create } from \"zustand\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"http://172.16.31.16:3000\";\n// 最後に会計した時間をlocalStorageから取得するヘルパー\nconst getLastCheckoutTime = tableNumber => {\n  const stored = localStorage.getItem(`resto_last_checkout_${tableNumber}`);\n  return stored ? parseInt(stored, 10) : 0;\n};\nconst useCartStore = create((set, get) => ({\n  cart: [],\n  orders: [],\n  menuData: null,\n  menuLoading: false,\n  error: null,\n  lastCheckoutTime: 0,\n  fetchMenu: async () => {\n    set({\n      menuLoading: true,\n      error: null\n    });\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/menu`);\n      if (!response.ok) throw new Error(\"メニューの読み込みに失敗しました\");\n      const data = await response.json();\n      set({\n        menuData: data,\n        menuLoading: false\n      });\n    } catch (err) {\n      set({\n        error: err.message,\n        menuLoading: false\n      });\n    }\n  },\n  fetchMenuData: async _arg => {\n    await get().fetchMenu();\n  },\n  fetchOrders: async tableNumber => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/orders?tableNumber=${tableNumber}`);\n      if (response.ok) {\n        const allOrders = await response.json();\n\n        // フィルタリング: 「前回の会計時間」よりあとに作られた注文だけを表示\n        const checkoutTime = getLastCheckoutTime(tableNumber);\n        const currentSessionOrders = allOrders.filter(order => {\n          const orderTime = new Date(order.timestamp).getTime();\n          return orderTime > checkoutTime;\n        });\n        set({\n          orders: currentSessionOrders,\n          lastCheckoutTime: checkoutTime\n        });\n      }\n    } catch (err) {\n      console.error(\"注文履歴の取得に失敗:\", err);\n    }\n  },\n  addToCart: (item, quantity, options = []) => {\n    set(state => {\n      const basePrice = Number(item.price) || 0;\n      const optionsPrice = options.reduce((sum, opt) => {\n        if (typeof opt === \"object\" && opt !== null && \"price\" in opt) {\n          return sum + (Number(opt.price) || 0);\n        }\n        return sum;\n      }, 0);\n      const unitPrice = basePrice + optionsPrice;\n      const existingIndex = state.cart.findIndex(c => c.id === item.id && JSON.stringify(c.selectedOptions) === JSON.stringify(options));\n      if (existingIndex > -1) {\n        const newCart = [...state.cart];\n        newCart[existingIndex].quantity += quantity;\n        newCart[existingIndex].totalPrice = unitPrice * newCart[existingIndex].quantity;\n        return {\n          cart: newCart\n        };\n      } else {\n        const newItem = {\n          ...item,\n          quantity,\n          selectedOptions: options,\n          totalPrice: unitPrice * quantity\n        };\n        return {\n          cart: [...state.cart, newItem]\n        };\n      }\n    });\n  },\n  removeFromCart: index => {\n    set(state => ({\n      cart: state.cart.filter((_, i) => i !== index)\n    }));\n  },\n  updateCartItemQuantity: (index, quantity) => {\n    set(state => {\n      const newCart = [...state.cart];\n      if (quantity <= 0) {\n        return {\n          cart: newCart.filter((_, i) => i !== index)\n        };\n      }\n      const item = newCart[index];\n      const basePrice = Number(item.price) || 0;\n      const optionsPrice = (item.selectedOptions || []).reduce((sum, opt) => {\n        if (typeof opt === \"object\" && opt !== null && \"price\" in opt) {\n          return sum + (Number(opt.price) || 0);\n        }\n        return sum;\n      }, 0);\n      newCart[index].quantity = quantity;\n      newCart[index].totalPrice = (basePrice + optionsPrice) * quantity;\n      return {\n        cart: newCart\n      };\n    });\n  },\n  clearCart: () => set({\n    cart: []\n  }),\n  // ★修正箇所: ここから fetch を完全に削除しました\n  checkout: async tableNumber => {\n    const now = Date.now();\n    // 1. ローカルストレージに今の時間を記録（これが「区切り」になります）\n    localStorage.setItem(`resto_last_checkout_${tableNumber}`, now.toString());\n\n    // 2. 画面の状態をリセット\n    set({\n      cart: [],\n      orders: [],\n      lastCheckoutTime: now\n    });\n\n    // 通信処理は一切書きません！\n  },\n  placeOrder: async tableNumber => {\n    const {\n      cart\n    } = get();\n    if (cart.length === 0) return null;\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/orders`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          tableNumber,\n          items: cart\n        })\n      });\n      if (!response.ok) throw new Error(\"注文に失敗しました\");\n      const newOrder = await response.json();\n      set({\n        cart: []\n      });\n      await get().fetchOrders(tableNumber);\n      return newOrder;\n    } catch (err) {\n      set({\n        error: err.message\n      });\n      return null;\n    }\n  },\n  callStaff: async tableNumber => {\n    try {\n      await fetch(`${API_BASE_URL}/api/call`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          tableNumber\n        })\n      });\n      await get().fetchOrders(tableNumber);\n    } catch (err) {\n      console.error(\"スタッフ呼び出しエラー\", err);\n    }\n  }\n}));\nexport const useCartTotalAmount = () => {\n  _s();\n  const cart = useCartStore(state => state.cart);\n  return cart.reduce((sum, item) => sum + (item.totalPrice || 0), 0);\n};\n_s(useCartTotalAmount, \"L4Q9CYCqIhEZ8aSQ0u+u5YP3sD0=\", false, function () {\n  return [useCartStore];\n});\nexport const useTotalBillAmount = () => {\n  _s2();\n  const orders = useCartStore(state => state.orders);\n  return orders.reduce((total, order) => {\n    const orderTotal = order.totalAmount || order.totalPrice || (order.items || []).reduce((sub, item) => sub + (item.totalPrice || 0), 0);\n    return total + orderTotal;\n  }, 0);\n};\n_s2(useTotalBillAmount, \"/BBlCk5bctNdc/53FtWqVYN7m+M=\", false, function () {\n  return [useCartStore];\n});\nexport const useSessionTotal = () => {\n  _s3();\n  const cartTotal = useCartTotalAmount();\n  const billTotal = useTotalBillAmount();\n  return billTotal + cartTotal;\n};\n_s3(useSessionTotal, \"VwCr9/7NowPEtsIIrUTUZIlnGM4=\", false, function () {\n  return [useCartTotalAmount, useTotalBillAmount];\n});\nexport default useCartStore;","map":{"version":3,"names":["create","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","getLastCheckoutTime","tableNumber","stored","localStorage","getItem","parseInt","useCartStore","set","get","cart","orders","menuData","menuLoading","error","lastCheckoutTime","fetchMenu","response","fetch","ok","Error","data","json","err","message","fetchMenuData","_arg","fetchOrders","allOrders","checkoutTime","currentSessionOrders","filter","order","orderTime","Date","timestamp","getTime","console","addToCart","item","quantity","options","state","basePrice","Number","price","optionsPrice","reduce","sum","opt","unitPrice","existingIndex","findIndex","c","id","JSON","stringify","selectedOptions","newCart","totalPrice","newItem","removeFromCart","index","_","i","updateCartItemQuantity","clearCart","checkout","now","setItem","toString","placeOrder","length","method","headers","body","items","newOrder","callStaff","useCartTotalAmount","_s","useTotalBillAmount","_s2","total","orderTotal","totalAmount","sub","useSessionTotal","_s3","cartTotal","billTotal"],"sources":["C:/Users/arsuser/Documents/24A18/卒業研究/main/resto-app/src/store/cartStore.ts"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { MenuItem, CartItem, Order, MenuData } from \"../types\";\r\n\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"http://172.16.31.16:3000\";\r\n\r\ninterface CartState {\r\n  cart: CartItem[];\r\n  orders: Order[];\r\n  menuData: MenuData | null;\r\n  menuLoading: boolean;\r\n  error: string | null;\r\n  lastCheckoutTime: number;\r\n\r\n  fetchMenu: () => Promise<void>;\r\n  fetchMenuData: (arg?: any) => Promise<void>;\r\n  fetchOrders: (tableNumber: number) => Promise<void>;\r\n  addToCart: (\r\n    item: MenuItem,\r\n    quantity: number,\r\n    options?: (string | { name: string; price: number })[]\r\n  ) => void;\r\n  removeFromCart: (index: number) => void;\r\n  updateCartItemQuantity: (index: number, quantity: number) => void;\r\n  placeOrder: (tableNumber: number) => Promise<Order | null>;\r\n  checkout: (tableNumber: number) => Promise<void>;\r\n  callStaff: (tableNumber: number) => Promise<void>;\r\n  clearCart: () => void;\r\n}\r\n\r\n// 最後に会計した時間をlocalStorageから取得するヘルパー\r\nconst getLastCheckoutTime = (tableNumber: number) => {\r\n  const stored = localStorage.getItem(`resto_last_checkout_${tableNumber}`);\r\n  return stored ? parseInt(stored, 10) : 0;\r\n};\r\n\r\nconst useCartStore = create<CartState>((set, get) => ({\r\n  cart: [],\r\n  orders: [],\r\n  menuData: null,\r\n  menuLoading: false,\r\n  error: null,\r\n  lastCheckoutTime: 0,\r\n\r\n  fetchMenu: async () => {\r\n    set({ menuLoading: true, error: null });\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/menu`);\r\n      if (!response.ok) throw new Error(\"メニューの読み込みに失敗しました\");\r\n      const data = await response.json();\r\n      set({ menuData: data, menuLoading: false });\r\n    } catch (err: any) {\r\n      set({ error: err.message, menuLoading: false });\r\n    }\r\n  },\r\n\r\n  fetchMenuData: async (_arg?: any) => {\r\n    await get().fetchMenu();\r\n  },\r\n\r\n  fetchOrders: async (tableNumber: number) => {\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE_URL}/api/orders?tableNumber=${tableNumber}`\r\n      );\r\n      if (response.ok) {\r\n        const allOrders: Order[] = await response.json();\r\n\r\n        // フィルタリング: 「前回の会計時間」よりあとに作られた注文だけを表示\r\n        const checkoutTime = getLastCheckoutTime(tableNumber);\r\n\r\n        const currentSessionOrders = allOrders.filter((order) => {\r\n          const orderTime = new Date(order.timestamp).getTime();\r\n          return orderTime > checkoutTime;\r\n        });\r\n\r\n        set({ orders: currentSessionOrders, lastCheckoutTime: checkoutTime });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"注文履歴の取得に失敗:\", err);\r\n    }\r\n  },\r\n\r\n  addToCart: (item, quantity, options = []) => {\r\n    set((state) => {\r\n      const basePrice = Number(item.price) || 0;\r\n      const optionsPrice = options.reduce((sum, opt) => {\r\n        if (typeof opt === \"object\" && opt !== null && \"price\" in opt) {\r\n          return sum + (Number(opt.price) || 0);\r\n        }\r\n        return sum;\r\n      }, 0);\r\n\r\n      const unitPrice = basePrice + optionsPrice;\r\n      const existingIndex = state.cart.findIndex(\r\n        (c) =>\r\n          c.id === item.id &&\r\n          JSON.stringify(c.selectedOptions) === JSON.stringify(options)\r\n      );\r\n\r\n      if (existingIndex > -1) {\r\n        const newCart = [...state.cart];\r\n        newCart[existingIndex].quantity += quantity;\r\n        newCart[existingIndex].totalPrice =\r\n          unitPrice * newCart[existingIndex].quantity;\r\n        return { cart: newCart };\r\n      } else {\r\n        const newItem: CartItem = {\r\n          ...item,\r\n          quantity,\r\n          selectedOptions: options as any,\r\n          totalPrice: unitPrice * quantity,\r\n        };\r\n        return { cart: [...state.cart, newItem] };\r\n      }\r\n    });\r\n  },\r\n\r\n  removeFromCart: (index) => {\r\n    set((state) => ({\r\n      cart: state.cart.filter((_, i) => i !== index),\r\n    }));\r\n  },\r\n\r\n  updateCartItemQuantity: (index, quantity) => {\r\n    set((state) => {\r\n      const newCart = [...state.cart];\r\n      if (quantity <= 0) {\r\n        return { cart: newCart.filter((_, i) => i !== index) };\r\n      }\r\n\r\n      const item = newCart[index];\r\n      const basePrice = Number(item.price) || 0;\r\n      const optionsPrice = (item.selectedOptions || []).reduce(\r\n        (sum: number, opt: any) => {\r\n          if (typeof opt === \"object\" && opt !== null && \"price\" in opt) {\r\n            return sum + (Number(opt.price) || 0);\r\n          }\r\n          return sum;\r\n        },\r\n        0\r\n      );\r\n\r\n      newCart[index].quantity = quantity;\r\n      newCart[index].totalPrice = (basePrice + optionsPrice) * quantity;\r\n      return { cart: newCart };\r\n    });\r\n  },\r\n\r\n  clearCart: () => set({ cart: [] }),\r\n\r\n  // ★修正箇所: ここから fetch を完全に削除しました\r\n  checkout: async (tableNumber: number) => {\r\n    const now = Date.now();\r\n    // 1. ローカルストレージに今の時間を記録（これが「区切り」になります）\r\n    localStorage.setItem(`resto_last_checkout_${tableNumber}`, now.toString());\r\n\r\n    // 2. 画面の状態をリセット\r\n    set({ cart: [], orders: [], lastCheckoutTime: now });\r\n\r\n    // 通信処理は一切書きません！\r\n  },\r\n\r\n  placeOrder: async (tableNumber: number) => {\r\n    const { cart } = get();\r\n    if (cart.length === 0) return null;\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/orders`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ tableNumber, items: cart }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"注文に失敗しました\");\r\n\r\n      const newOrder = await response.json();\r\n      set({ cart: [] });\r\n      await get().fetchOrders(tableNumber);\r\n      return newOrder;\r\n    } catch (err: any) {\r\n      set({ error: err.message });\r\n      return null;\r\n    }\r\n  },\r\n\r\n  callStaff: async (tableNumber: number) => {\r\n    try {\r\n      await fetch(`${API_BASE_URL}/api/call`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ tableNumber }),\r\n      });\r\n      await get().fetchOrders(tableNumber);\r\n    } catch (err) {\r\n      console.error(\"スタッフ呼び出しエラー\", err);\r\n    }\r\n  },\r\n}));\r\n\r\nexport const useCartTotalAmount = () => {\r\n  const cart = useCartStore((state) => state.cart);\r\n  return cart.reduce((sum, item) => sum + (item.totalPrice || 0), 0);\r\n};\r\n\r\nexport const useTotalBillAmount = () => {\r\n  const orders = useCartStore((state) => state.orders);\r\n  return orders.reduce((total, order) => {\r\n    const orderTotal =\r\n      order.totalAmount ||\r\n      order.totalPrice ||\r\n      (order.items || []).reduce(\r\n        (sub, item) => sub + (item.totalPrice || 0),\r\n        0\r\n      );\r\n    return total + orderTotal;\r\n  }, 0);\r\n};\r\n\r\nexport const useSessionTotal = () => {\r\n  const cartTotal = useCartTotalAmount();\r\n  const billTotal = useTotalBillAmount();\r\n  return billTotal + cartTotal;\r\n};\r\n\r\nexport default useCartStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}