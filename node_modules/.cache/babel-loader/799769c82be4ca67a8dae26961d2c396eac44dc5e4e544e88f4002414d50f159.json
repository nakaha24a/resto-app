{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arsuser\\\\Documents\\\\24A18\\\\\\u5352\\u696D\\u7814\\u7A76\\\\main\\\\resto-app\\\\src\\\\components\\\\OrderScreen.tsx\",\n  _s = $RefreshSig$();\n/* src/components/OrderScreen.tsx - 修正版 */\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport useCartStore, { useCartTotalAmount, useTotalBillAmount } from \"../store/cartStore\";\nimport OrderHistoryPane from \"./OrderHistoryPane\";\nimport OrderHeader from \"./OrderHeader\";\nimport CategoryNav from \"./CategoryNav\";\nimport MenuContent from \"./MenuContent\";\nimport CartSidebar from \"./CartSidebar\";\nimport BottomNav from \"./BottomNav\";\nimport TopScreen from \"./TopScreen\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getCategories = menuData => {\n  if (!menuData || !Array.isArray(menuData.categories)) return [];\n  const categoryNames = menuData.categories.map(c => c.name);\n  const uniqueNames = Array.from(new Set(categoryNames));\n  const filtered = uniqueNames.filter(n => n !== \"TOP\");\n  const hasRecommended = menuData.categories.flatMap(c => c.items).some(item => item.isRecommended);\n  if (hasRecommended && !filtered.includes(\"おすすめ\")) {\n    return [\"おすすめ\", ...filtered];\n  }\n  return filtered;\n};\nconst OrderScreen = ({\n  userId,\n  activeTab,\n  onNavigate,\n  onGoToPayment,\n  setConfirmationMessage,\n  onCallStaff\n}) => {\n  _s();\n  const {\n    cart,\n    orders,\n    placeOrder,\n    fetchOrders\n  } = useCartStore();\n  const cartTotalAmount = useCartTotalAmount();\n  const totalBillAmount = useTotalBillAmount();\n  const menuData = useCartStore(state => state.menuData);\n  const menuLoading = useCartStore(state => state.menuLoading);\n  const menuError = useCartStore(state => state.error);\n  const recommendedItems = useMemo(() => {\n    if (!menuData) return [];\n    return menuData.categories.flatMap(c => c.items).filter(i => i.isRecommended);\n  }, [menuData]);\n  const tableNum = useMemo(() => {\n    // T-1 や user1 などの文字列から数字だけを取り出す\n    const num = parseInt(userId.replace(/[^0-9]/g, \"\"), 10);\n    return isNaN(num) ? 0 : num;\n  }, [userId]);\n  useEffect(() => {\n    if (tableNum > 0) {\n      fetchOrders(tableNum);\n      const intervalId = setInterval(() => {\n        fetchOrders(tableNum);\n      }, 5000);\n      return () => clearInterval(intervalId);\n    }\n  }, [fetchOrders, tableNum]);\n  const CATEGORIES = useMemo(() => getCategories(menuData), [menuData]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  useEffect(() => {\n    if (!menuLoading && menuData && CATEGORIES.length > 0) {\n      if (!selectedCategory || !CATEGORIES.includes(selectedCategory)) {\n        const initialCategory = CATEGORIES.includes(\"おすすめ\") ? \"おすすめ\" : CATEGORIES[0];\n        if (initialCategory) {\n          setSelectedCategory(initialCategory);\n        }\n      }\n    }\n  }, [CATEGORIES, selectedCategory, menuLoading, menuData]);\n  const handlePlaceOrder = async () => {\n    if (tableNum <= 0) {\n      setConfirmationMessage(`テーブル番号が無効です。(ID: ${userId})`);\n      return;\n    }\n    const newOrder = await placeOrder(tableNum);\n    if (newOrder) {\n      setConfirmationMessage(\"ご注文を承りました\");\n    } else {\n      const storeError = useCartStore.getState().error;\n      setConfirmationMessage(`注文処理に失敗しました。\\n${storeError || \"\"}`);\n    }\n  };\n  const renderMainContent = () => {\n    if (menuLoading && !menuData) return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"20px\"\n      },\n      children: \"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 14\n    }, this);\n    if (menuError) return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"20px\",\n        color: \"red\"\n      },\n      children: [\"\\u30A8\\u30E9\\u30FC: \", menuError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this);\n    if (!menuData) return null;\n    if (activeTab === \"TOP\") {\n      return /*#__PURE__*/_jsxDEV(TopScreen, {\n        categories: CATEGORIES,\n        recommendations: recommendedItems,\n        onSelectCategory: cat => {\n          setSelectedCategory(cat);\n          onNavigate(\"ORDER\");\n        },\n        onCallStaff: msg => onCallStaff(msg)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this);\n    }\n    if (activeTab === \"ORDER\") {\n      const activeCategory = selectedCategory || (CATEGORIES.length > 0 ? CATEGORIES[0] : \"\");\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-content-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(CategoryNav, {\n            categories: CATEGORIES,\n            selectedCategory: activeCategory,\n            onSelectCategory: setSelectedCategory\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuContent, {\n            selectedCategory: activeCategory,\n            searchQuery: searchQuery\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CartSidebar, {\n          cart: cart,\n          totalAmount: cartTotalAmount,\n          onPlaceOrder: handlePlaceOrder,\n          onGoToPayment: onGoToPayment,\n          pendingOrderTotalAmount: totalBillAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n    if (activeTab === \"HISTORY\") {\n      return /*#__PURE__*/_jsxDEV(OrderHistoryPane, {\n        pendingOrders: orders,\n        orderHistoryTotalAmount: totalBillAmount,\n        onGoToPaymentView: onGoToPayment,\n        onCallStaff: () => onCallStaff(\"スタッフを呼び出しました\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this);\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-screen-layout\",\n    children: [/*#__PURE__*/_jsxDEV(OrderHeader, {\n      userId: userId,\n      searchQuery: searchQuery,\n      onSearchChange: setSearchQuery,\n      onCallStaff: () => onCallStaff(\"スタッフを呼び出しました\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `order-main-area ${activeTab === \"HISTORY\" ? \"history-layout\" : \"\"}`,\n      children: renderMainContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BottomNav, {\n      activeTab: activeTab,\n      onNavigate: tab => {\n        if (tab === \"ORDER\") {\n          if (!selectedCategory && CATEGORIES.length > 0) {\n            const defaultCat = CATEGORIES.includes(\"おすすめ\") ? \"おすすめ\" : CATEGORIES[0];\n            setSelectedCategory(defaultCat);\n          }\n        }\n        onNavigate(tab);\n      },\n      cartItemCount: cart.reduce((sum, item) => sum + item.quantity, 0)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderScreen, \"IgR7jID18zSRoVfEu899NlYs6cM=\", false, function () {\n  return [useCartStore, useCartTotalAmount, useTotalBillAmount, useCartStore, useCartStore, useCartStore];\n});\n_c = OrderScreen;\nexport default OrderScreen;\nvar _c;\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"names":["React","useMemo","useState","useEffect","useCartStore","useCartTotalAmount","useTotalBillAmount","OrderHistoryPane","OrderHeader","CategoryNav","MenuContent","CartSidebar","BottomNav","TopScreen","jsxDEV","_jsxDEV","Fragment","_Fragment","getCategories","menuData","Array","isArray","categories","categoryNames","map","c","name","uniqueNames","from","Set","filtered","filter","n","hasRecommended","flatMap","items","some","item","isRecommended","includes","OrderScreen","userId","activeTab","onNavigate","onGoToPayment","setConfirmationMessage","onCallStaff","_s","cart","orders","placeOrder","fetchOrders","cartTotalAmount","totalBillAmount","state","menuLoading","menuError","error","recommendedItems","i","tableNum","num","parseInt","replace","isNaN","intervalId","setInterval","clearInterval","CATEGORIES","selectedCategory","setSelectedCategory","searchQuery","setSearchQuery","length","initialCategory","handlePlaceOrder","newOrder","storeError","getState","renderMainContent","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","recommendations","onSelectCategory","cat","msg","activeCategory","className","totalAmount","onPlaceOrder","pendingOrderTotalAmount","pendingOrders","orderHistoryTotalAmount","onGoToPaymentView","onSearchChange","tab","defaultCat","cartItemCount","reduce","sum","quantity","_c","$RefreshReg$"],"sources":["C:/Users/arsuser/Documents/24A18/卒業研究/main/resto-app/src/components/OrderScreen.tsx"],"sourcesContent":["/* src/components/OrderScreen.tsx - 修正版 */\r\nimport React, { useMemo, useState, useEffect } from \"react\";\r\nimport useCartStore, {\r\n  useCartTotalAmount,\r\n  useTotalBillAmount,\r\n} from \"../store/cartStore\";\r\nimport { MenuData, Category } from \"../types\";\r\n\r\nimport OrderHistoryPane from \"./OrderHistoryPane\";\r\nimport OrderHeader from \"./OrderHeader\";\r\nimport CategoryNav from \"./CategoryNav\";\r\nimport MenuContent from \"./MenuContent\";\r\nimport CartSidebar from \"./CartSidebar\";\r\nimport BottomNav from \"./BottomNav\";\r\nimport TopScreen from \"./TopScreen\";\r\n\r\nexport type NavTab = \"TOP\" | \"ORDER\" | \"HISTORY\";\r\n\r\ninterface OrderScreenProps {\r\n  userId: string;\r\n  activeTab: NavTab;\r\n  onNavigate: (tab: NavTab) => void;\r\n  onGoToPayment: () => void;\r\n  setConfirmationMessage: (message: string) => void;\r\n  onCallStaff: (message: string) => void;\r\n}\r\n\r\nconst getCategories = (menuData: MenuData | null): string[] => {\r\n  if (!menuData || !Array.isArray(menuData.categories)) return [];\r\n\r\n  const categoryNames = menuData.categories.map((c: Category) => c.name);\r\n  const uniqueNames = Array.from(new Set(categoryNames));\r\n  const filtered = uniqueNames.filter((n) => n !== \"TOP\");\r\n\r\n  const hasRecommended = menuData.categories\r\n    .flatMap((c) => c.items)\r\n    .some((item) => item.isRecommended);\r\n\r\n  if (hasRecommended && !filtered.includes(\"おすすめ\")) {\r\n    return [\"おすすめ\", ...filtered];\r\n  }\r\n\r\n  return filtered;\r\n};\r\n\r\nconst OrderScreen: React.FC<OrderScreenProps> = ({\r\n  userId,\r\n  activeTab,\r\n  onNavigate,\r\n  onGoToPayment,\r\n  setConfirmationMessage,\r\n  onCallStaff,\r\n}) => {\r\n  const { cart, orders, placeOrder, fetchOrders } = useCartStore();\r\n\r\n  const cartTotalAmount = useCartTotalAmount();\r\n  const totalBillAmount = useTotalBillAmount();\r\n\r\n  const menuData = useCartStore((state) => state.menuData);\r\n  const menuLoading = useCartStore((state) => state.menuLoading);\r\n  const menuError = useCartStore((state) => state.error);\r\n\r\n  const recommendedItems = useMemo(() => {\r\n    if (!menuData) return [];\r\n    return menuData.categories\r\n      .flatMap((c) => c.items)\r\n      .filter((i) => i.isRecommended);\r\n  }, [menuData]);\r\n\r\n  const tableNum = useMemo(() => {\r\n    // T-1 や user1 などの文字列から数字だけを取り出す\r\n    const num = parseInt(userId.replace(/[^0-9]/g, \"\"), 10);\r\n    return isNaN(num) ? 0 : num;\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    if (tableNum > 0) {\r\n      fetchOrders(tableNum);\r\n      const intervalId = setInterval(() => {\r\n        fetchOrders(tableNum);\r\n      }, 5000);\r\n      return () => clearInterval(intervalId);\r\n    }\r\n  }, [fetchOrders, tableNum]);\r\n\r\n  const CATEGORIES = useMemo(() => getCategories(menuData), [menuData]);\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!menuLoading && menuData && CATEGORIES.length > 0) {\r\n      if (!selectedCategory || !CATEGORIES.includes(selectedCategory)) {\r\n        const initialCategory = CATEGORIES.includes(\"おすすめ\")\r\n          ? \"おすすめ\"\r\n          : CATEGORIES[0];\r\n\r\n        if (initialCategory) {\r\n          setSelectedCategory(initialCategory);\r\n        }\r\n      }\r\n    }\r\n  }, [CATEGORIES, selectedCategory, menuLoading, menuData]);\r\n\r\n  const handlePlaceOrder = async () => {\r\n    if (tableNum <= 0) {\r\n      setConfirmationMessage(`テーブル番号が無効です。(ID: ${userId})`);\r\n      return;\r\n    }\r\n    const newOrder = await placeOrder(tableNum);\r\n    if (newOrder) {\r\n      setConfirmationMessage(\"ご注文を承りました\");\r\n    } else {\r\n      const storeError = useCartStore.getState().error;\r\n      setConfirmationMessage(`注文処理に失敗しました。\\n${storeError || \"\"}`);\r\n    }\r\n  };\r\n\r\n  const renderMainContent = () => {\r\n    if (menuLoading && !menuData)\r\n      return <div style={{ padding: \"20px\" }}>読み込み中...</div>;\r\n    if (menuError)\r\n      return (\r\n        <div style={{ padding: \"20px\", color: \"red\" }}>エラー: {menuError}</div>\r\n      );\r\n    if (!menuData) return null;\r\n\r\n    if (activeTab === \"TOP\") {\r\n      return (\r\n        <TopScreen\r\n          categories={CATEGORIES}\r\n          recommendations={recommendedItems}\r\n          onSelectCategory={(cat) => {\r\n            setSelectedCategory(cat);\r\n            onNavigate(\"ORDER\");\r\n          }}\r\n          onCallStaff={(msg) => onCallStaff(msg)}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (activeTab === \"ORDER\") {\r\n      const activeCategory =\r\n        selectedCategory || (CATEGORIES.length > 0 ? CATEGORIES[0] : \"\");\r\n\r\n      return (\r\n        <>\r\n          <div className=\"main-content-wrapper\">\r\n            <CategoryNav\r\n              categories={CATEGORIES}\r\n              selectedCategory={activeCategory}\r\n              onSelectCategory={setSelectedCategory}\r\n            />\r\n            <MenuContent\r\n              selectedCategory={activeCategory}\r\n              searchQuery={searchQuery}\r\n            />\r\n          </div>\r\n          <CartSidebar\r\n            cart={cart}\r\n            totalAmount={cartTotalAmount}\r\n            onPlaceOrder={handlePlaceOrder}\r\n            onGoToPayment={onGoToPayment}\r\n            pendingOrderTotalAmount={totalBillAmount}\r\n          />\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (activeTab === \"HISTORY\") {\r\n      return (\r\n        <OrderHistoryPane\r\n          pendingOrders={orders}\r\n          orderHistoryTotalAmount={totalBillAmount}\r\n          onGoToPaymentView={onGoToPayment}\r\n          onCallStaff={() => onCallStaff(\"スタッフを呼び出しました\")}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"order-screen-layout\">\r\n      <OrderHeader\r\n        userId={userId}\r\n        searchQuery={searchQuery}\r\n        onSearchChange={setSearchQuery}\r\n        onCallStaff={() => onCallStaff(\"スタッフを呼び出しました\")}\r\n      />\r\n\r\n      <div\r\n        className={`order-main-area ${\r\n          activeTab === \"HISTORY\" ? \"history-layout\" : \"\"\r\n        }`}\r\n      >\r\n        {renderMainContent()}\r\n      </div>\r\n\r\n      <BottomNav\r\n        activeTab={activeTab}\r\n        onNavigate={(tab) => {\r\n          if (tab === \"ORDER\") {\r\n            if (!selectedCategory && CATEGORIES.length > 0) {\r\n              const defaultCat = CATEGORIES.includes(\"おすすめ\")\r\n                ? \"おすすめ\"\r\n                : CATEGORIES[0];\r\n              setSelectedCategory(defaultCat);\r\n            }\r\n          }\r\n          onNavigate(tab);\r\n        }}\r\n        cartItemCount={cart.reduce((sum, item) => sum + item.quantity, 0)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}